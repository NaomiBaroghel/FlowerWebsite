<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">

    <title></title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" href="css/home.css">

    <link rel="stylesheet" type="text/css" href="css/login.css">




<style>

.wrap {
  width: 80%;
  margin-top: 8px;
  background: #DCDCDC;
  border-radius: 30px;
  overflow: hidden;
  padding: 72px 55px 90px 55px;
}



body {
  background: #cd5a91;
}
</style>
  </head>
    <body class="bg" >


<center>
  	<div class="wrap">
  <h1 style="font-family:Brush Script MT; font-size:100px;"> Reset Password </h1>
  <p  style="font-family: Apple Chancery ; font-size:30px;">Please enter your new password</p>

<div style="width:50%;">
  <div class="form-group">
    <input type="password" class="form-control" name="password" id="newpassword" placeholder="New Password" required="required">
  </div>
  <div class="form-group">
    <button type="button" id="btnsend" class="btn btn-primary btn-lg btn-block login-btn" onclick="doreset()" style="background-color:#96304c" >Send</button>
  </div>
</div>
</center>

</div>
</div>
<script type="text/javascript">
async function doreset() {

  let id = window.location.href.split('=')[1];
  let newpassword = document.getElementById("newpassword").value;
       await $.ajax ({
         url :"http://localhost:8080/resetpassword",
         type: "POST",
         data : JSON.stringify({id,newpassword}),
         timeout: 5000,

         contentType: 'application/json; charset=utf-8',
         success: function(data){
               alert('Password reset with success !  \n You will be redirect.');
               window.location.href="index.html";

           },
           error: function(xmlhttprequest, textstatus, message) {
             if(textstatus==="timeout") {
                 alert("got timeout");
             }},
           statusCode: {


           400: function() {
              alert('bad request');
          },

        } });
  }

</script>
  </body>
</html>
